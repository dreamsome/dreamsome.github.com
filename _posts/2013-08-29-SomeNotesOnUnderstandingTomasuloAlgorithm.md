---
layout: post
title: "Understanding Tomasulo Algorithm 的一些笔记"
tags : [arch]
---

**1. 教科书是获取知识的一种方法，而非全部。**

Thomas S. Kuhn 在[《科学革命的结构》](http://book.douban.com/subject/1123740/)里说过，教科书会误人子弟 ，因为它遗漏了太多细节。一个想法背后有很多重要的东西，但教科书为了言简意赅不得不将它们隐藏起来，比如一些历史因素、初心以及那些“淹没在历史长河中的”竞争对手。教科书直接把**结果**放在你眼前，于是你看到了一副全景图，图里有 A，有 B，还有 C，以及 D……但却不知道为什么非得有它们。

<!--more-->


当我们在理解一样东西时，以下这些东西也很有用：

* 原始论文
* 有经验的人的想法（尤其当他们在试图总结某些事情的时候）
* 某些网页（感谢 Google）

**2. 寄存器重命名并不“名副其实”。**


人们常说的“寄存器重命名”机制提供了多于 ISA 需要的物理寄存器，也就是说在一条指令插到指令队列之前，体系结构寄存器的名字（比如 r5）已经重命名了为物理寄存器的名字（比如 p19）。但 Tomasulo 算法并没有使用这种方法，它实际把一条指令中的寄存器“重命名”了为一个部件的编号（部件可以是[保留站](https://en.wikipedia.org/wiki/Reservation_stations)中的一个条目，或任何一个寄存器）。


**3. 抽象是有力的武器。**

“生产者-消费者”模型简化了两条指令之间的关系，这样一来 CDB 的功能不言自明： 生产者把输出放到某个地方，消费者再从这个地方收集它们所需要的输入（数据通过标签来区分）。



**4.Tomasulo 算法和重排序缓冲（reorder buffer）没有任何关系**


，尽管它俩在现代微处理器中都扮演了很关键的角色。但 Tomasulo 算法的目的在于实现乱序执行（不保证提交顺序），而 reorder buffer 旨在实现[精确中断](http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=00004607)。

